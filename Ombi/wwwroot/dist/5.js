webpackJsonp([5],{168:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=n(0),a=n(7),s=n(10),c=n(89),l=n(251),d=n(253),u=n(255),m=n(257),p=n(259),f=n(3),v=n(3),g=n(3),h=[{path:"",component:p.WelcomeComponent},{path:"MediaServer",component:u.MediaServerComponent},{path:"Plex",component:m.PlexComponent},{path:"Emby",component:d.EmbyComponent},{path:"CreateAdmin",component:l.CreateAdminComponent}],b=function(){function e(){}return e=i([r.NgModule({imports:[o.CommonModule,a.FormsModule,c.ConfirmDialogModule,s.RouterModule.forChild(h)],declarations:[p.WelcomeComponent,u.MediaServerComponent,m.PlexComponent,l.CreateAdminComponent,d.EmbyComponent],exports:[s.RouterModule],providers:[v.PlexService,g.IdentityService,f.EmbyService,c.ConfirmationService]})],e)}();t.WizardModule=b},251:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=n(10),s=n(15),c=n(3),l=n(3),d=n(3),u=function(){function e(e,t,n,i,o){this.identityService=e,this.notificationService=t,this.router=n,this.auth=i,this.settings=o}return e.prototype.createUser=function(){var e=this;this.identityService.createWizardUser({username:this.username,password:this.password,usePlexAdminAccount:!1}).subscribe(function(t){t?e.auth.login({username:e.username,password:e.password,rememberMe:!1}).subscribe(function(t){localStorage.setItem("id_token",t.access_token),e.settings.getOmbi().subscribe(function(t){t.wizard=!0,e.settings.saveOmbi(t).subscribe(function(t){e.router.navigate(["search"])})})}):e.notificationService.error("There was an error... You might want to put this on Github...")})},e=i([r.Component({template:n(252)}),o("design:paramtypes",[c.IdentityService,l.NotificationService,a.Router,s.AuthService,d.SettingsService])],e)}();t.CreateAdminComponent=u},252:function(e,t){e.exports='\n<img class="landing-header" src="/images/logo.png" width="300" />\n<div class="landing-block shadow">\n<div class="media">\n<div id="contentBody" class="media-body">\n<h4 class="media-heading landing-title">Create the Admin account</h4>\n<small>This account will be used to configure your settings and also manage all of the requests.</small>\n<div class="form-group">\n    <div>\n        <label for="adminUsername">Username</label>\n        <input type="text" class="form-control form-control-custom" id="adminUsername" name="Username" [(ngModel)]="username" placeholder="Username">\n    </div>\n    <br />\n    <div>\n        <label for="adminPassword">Password</label>\n        <input type="password" class="form-control form-control-custom" id="adminPassword" name="Password" [(ngModel)]="password" placeholder="Password">\n    </div>\n</div>\n\n<div class="form-group">\n    <div style="text-align: center; margin-top: 20px">\n        <button (click)="createUser()" type="submit" class="btn btn-success-outline">Finish</button>\n    </div>\n</div>\n</div>\n</div>\n</div>'},253:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=n(10),s=n(3),c=n(3),l=function(){function e(e,t,n){this.embyService=e,this.router=t,this.notificationService=n}return e.prototype.ngOnInit=function(){this.embySettings={servers:[],id:0,enable:!0},this.embySettings.servers.push({ip:"",administratorId:"",id:0,apiKey:"",enableEpisodeSearching:!1,name:"Default",port:8096,ssl:!1,subDir:""})},e.prototype.save=function(){var e=this;this.embyService.logIn(this.embySettings).subscribe(function(t){null!=t&&t.servers[0].apiKey?e.router.navigate(["Wizard/CreateAdmin"]):e.notificationService.error("Username or password was incorrect. Could not authenticate with Emby.")})},e=i([r.Component({template:n(254)}),o("design:paramtypes",[s.EmbyService,a.Router,c.NotificationService])],e)}();t.EmbyComponent=l},254:function(e,t){e.exports='\n<img class="landing-header" src="/images/logo.png" width="300" />\n<div class="landing-block shadow">\n<div class="media">\n<div id="contentBody" class="media-body">\n<h4 class="media-heading landing-title">Emby Authentication</h4>\n    <div *ngIf="embySettings">\n        <div *ngIf="embySettings.servers">\n            <div *ngFor="let server of embySettings.servers">\n                <div class="form-group">\n                    <label for="Ip" class="control-label">Emby Hostname or IP Address</label>\n                    <div>\n                        <input type="text" [(ngModel)]="server.ip" class="form-control form-control-custom " id="Ip" name="Ip" placeholder="192.168.1.1">\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <label for="portNumber" class="control-label">Port</label>\n\n                    <div>\n                        <input type="text" [(ngModel)]="server.port" class="form-control form-control-custom " id="portNumber" name="Port" value="{{server.port}}">\n                    </div>\n                </div>\n                <div class="form-group">\n                    <div class="checkbox">\n                        <input type="checkbox" [(ngModel)]="server.ssl" id="Ssl" name="Ssl"><label for="Ssl">SSL</label>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <label for="username" class="control-label">Api Key</label>\n                    <div>\n                        <input type="text" [(ngModel)]="server.apiKey" class="form-control form-control-custom" id="apiKey" name="ApiKey" placeholder="ApiKey">\n                    </div>\n                </div>\n                <div style="text-align: center; margin-top: 20px">\n                    <a (click)="save()" id="embyApiKeySave" class="btn btn-primary-outline">Next <div id="spinner"></div></a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n</div>\n</div>'},255:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=n(10),s=function(){function e(e){this.router=e}return e.prototype.plex=function(){this.router.navigate(["Wizard/Plex"])},e.prototype.emby=function(){this.router.navigate(["Wizard/Emby"])},e.prototype.skip=function(){this.router.navigate(["Wizard/CreateAdmin"])},e=i([r.Component({template:n(256)}),o("design:paramtypes",[a.Router])],e)}();t.MediaServerComponent=s},256:function(e,t){e.exports='\n<img class="landing-header" src="/images/logo.png" width="300" />\n<div class="landing-block shadow">\n    <div class="media">\n        <div id="contentBody" class="media-body">\n            <h4 class="media-heading landing-title wizard-heading" id="statusTitle">Please choose your media server</h4>\n            <div class="form-group">\n                <div class="row">\n                    <a (click)="emby()" id="embyImg">\n                        <img class="wizard-img" src="/images/emby-logo-dark.png" />\n                    </a>\n                </div>\n                <div class="row">\n                    <a (click)="plex()" id="plexImg">\n                        <img class="wizard-img" src="/images/plex-logo-reversed.png" />\n                    </a>\n                </div>\n                <div class="row">\n                    <button (click)="skip()" class="btn btn-primary-outline wizard-img" id="plexImg">\n                        Skip\n                    </button>\n                </div>\n\n            </div>\n        </div>\n        </div>\n</div>\n\n\n'},257:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=n(10),s=n(89),c=n(3),l=n(3),d=n(15),u=function(){function e(e,t,n,i,o,r,a){this.plexService=e,this.router=t,this.notificationService=n,this.confirmationService=i,this.identityService=o,this.settings=r,this.auth=a}return e.prototype.requestAuthToken=function(){var e=this;this.plexService.logIn(this.login,this.password).subscribe(function(t){null!=t.user?e.confirmationService.confirm({message:"Do you want your Plex user to be the main admin account on Ombi?",header:"Use Plex Account",icon:"fa fa-check",accept:function(){e.identityService.createWizardUser({username:"",password:"",usePlexAdminAccount:!0}).subscribe(function(t){t?e.auth.login({username:e.login,password:e.password,rememberMe:!1}).subscribe(function(t){localStorage.setItem("id_token",t.access_token),e.settings.getOmbi().subscribe(function(t){t.wizard=!0,e.settings.saveOmbi(t).subscribe(function(t){e.settings.getUserManagementSettings().subscribe(function(t){t.importPlexAdmin=!0,e.settings.saveUserManagementSettings(t).subscribe(function(t){e.router.navigate(["login"])})})})})}):e.notificationService.error("Could not get the Plex Admin Information")})},reject:function(){e.router.navigate(["Wizard/CreateAdmin"])}}):e.notificationService.error("Username or password was incorrect. Could not authenticate with Plex.")})},e=i([r.Component({template:n(258)}),o("design:paramtypes",[c.PlexService,a.Router,l.NotificationService,s.ConfirmationService,l.IdentityService,l.SettingsService,d.AuthService])],e)}();t.PlexComponent=u},258:function(e,t){e.exports='\n<img class="landing-header" src="/images/logo.png" width="300" />\n<div class="landing-block shadow">\n<div class="media">\n<div id="contentBody" class="media-body">\n<h4 class="media-heading landing-title">Plex Authentication</h4>\n<div class="form-group">\n    <label for="username" class="control-label">Username and Password</label>\n    <div>\n        <input type="text" [(ngModel)]="login" class="form-control form-control-custom" id="username"  placeholder="Username">\n    </div>\n    <br />\n    <div>\n        <input type="password" [(ngModel)]="password" class="form-control form-control-custom" placeholder="Password">\n    </div>\n</div>\n<small>Please note we do not store this information, we only store your Plex Authorization Token that will allow Ombi to view your media and friends</small>\n<div class="form-group">\n    <div style="text-align: center; margin-top: 20px">\n        <button (click)="requestAuthToken()" class="btn btn-primary-outline">Request Token <i class="fa fa-key"></i></button>\n    </div>\n</div>\n</div>\n</div>\n</div>\n\n<p-confirmDialog></p-confirmDialog>'},259:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=n(10),s=function(){function e(e){this.router=e}return e.prototype.next=function(){this.router.navigate(["Wizard/MediaServer"])},e=i([r.Component({template:n(260)}),o("design:paramtypes",[a.Router])],e)}();t.WelcomeComponent=s},260:function(e,t){e.exports='\n<img class="landing-header" src="/images/logo.png" width="300" />\n<div id="area" class="landing-block shadow">\n\n    <div class="media">\n        <div id="contentBody" class="media-body">\n            <h4 class="media-heading landing-title" id="statusTitle">Welcome to Ombi</h4>\n            <div class="form-group">\n                <small>we are just going to run though the initial Ombi setup!</small>\n\n                <div style="text-align: center; margin-top: 20px">\n                    <a (click)="next()" class="btn btn-primary-outline">Next</a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'}});
//# sourceMappingURL=5.js.map